<!DOCTYPE html>
<html>
<head>
	<meta http-equiv='Content-type' content='text/html; charset=utf-8'>
	<title>Basic Example</title>
	<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0">
	<link rel="stylesheet" href="shared/css/base.css" />
	<link href='http://fonts.googleapis.com/css?family=Hammersmith+One' rel='stylesheet' type='text/css'>
</head>
<body>

	<header>
		<div class="logo">
			King’s  Verkopen
		</div>
		<span class="sell">
			Sell
		</span>  		
	</header>

	<div id="container">
		<p>
			To install React, follow the instructions on
			<a href="http://www.github.com/facebook/react/">GitHub</a>.
		</p>
		<p>
			If you can see this, React is not working right.
			If you checked out the source from GitHub make sure to run <code>grunt</code>.
		</p>


	</div>



	<section class="maps">
		<div class="location_options">
			<span class="current_location">Dam Square, Amsterdam</span>
			<span class="my_location">My location</span>
		</div>
		<div id="map-canvas"></div>
	</section>

	<section class="search">
		<input type="text" placeholder="SEARCH for products">
	</section>

	<section class="product_list">
		<ul>
			<li class="product">
				<img src="https://s-media-cache-ak0.pinimg.com/236x/e7/3c/9d/e73c9d4a8e7ec3ea780afa1f10ecb6e0.jpg" class="image">
				<div class="title">Super Yellow Bike</div>
				<div class="price">price € 44,90</div>
				<div class="distance">2km</div>
				<div class="buy">buy</div>
			</li>
			<li class="product">
				<img src="https://s-media-cache-ak0.pinimg.com/236x/e7/3c/9d/e73c9d4a8e7ec3ea780afa1f10ecb6e0.jpg" class="image">
				<div class="title">Super Yellow Bike</div>
				<div class="price">price € 44,90</div>
				<div class="distance">2km</div>
				<div class="buy">buy</div>
			</li>
			<li class="product">
				<img src="https://s-media-cache-ak0.pinimg.com/236x/e7/3c/9d/e73c9d4a8e7ec3ea780afa1f10ecb6e0.jpg" class="image">
				<div class="title">Super Yellow Bike</div>
				<div class="price">price € 44,90</div>
				<div class="distance">2km</div>
				<div class="buy">buy</div>
			</li>
			<li class="product">
				<img src="https://s-media-cache-ak0.pinimg.com/236x/e7/3c/9d/e73c9d4a8e7ec3ea780afa1f10ecb6e0.jpg" class="image">
				<div class="title">Super Yellow Bike</div>
				<div class="price">price € 44,90</div>
				<div class="distance">2km</div>
				<div class="buy">buy</div>
			</li>									
		</ul>
		
	</section>

	<section class="modal">
		
	</section>

	<script src="shared/thirdparty/es5-shim.min.js"></script>
	<script src="shared/thirdparty/es5-sham.min.js"></script>
	<script src="shared/thirdparty/console-polyfill.js"></script>
	<script src="build/react-with-addons.js"></script>
	<script src="src/geodata.js"></script>

	<script type="text/jsx">
		var GeoDistance = React.createClass({
			mixins: [React.addons.LinkedStateMixin],
			getInitialState: function() {
				return {
					'point1.latitude': 52.3532884,
					'point1.longitude': 4.8407814,
					'point2.latitude': 52.3865138,
					'point2.longitude': 4.8697248
				};
			},
			componentDidMount: function() {
				Geodata.retrieve(function(geodata) {
					this.setState({
						'point1.latitude': geodata.coordinates.latitude,
						'point1.longitude': geodata.coordinates.longitude
					});
				}.bind(this));
			},
			getGeodata: function(state) {
				return new Geodata({
					latitude: parseFloat(this.state[state + '.latitude'], 10),
					longitude: parseFloat(this.state[state + '.longitude'], 10)
				});
			},
			calculateDistance: function(point1, point2) {
				return point1.distance(point2);
			},
			render: function() {
				return (
					<form>
						<div>
							Point 1:
							<input type="text" valueLink={this.linkState('point1.latitude')} />
							<input type="text" valueLink={this.linkState('point1.longitude')} />
						</div>
						<div>
							Point 2:
							<input type="text" valueLink={this.linkState('point2.latitude')} />
							<input type="text" valueLink={this.linkState('point2.longitude')} />
						</div>
						<div>Distance: {this.calculateDistance(this.getGeodata('point1'), this.getGeodata('point2'))}</div>
					</form>
					);
			}
		});

React.render(
	<GeoDistance />,
	document.getElementById('container')
	);
</script>
<script src="build/JSXTransformer.js"></script>
<script src="https://maps.googleapis.com/maps/api/js"></script>
<script src="src/utils.js"></script>
</body>
</html>
